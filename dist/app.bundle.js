(()=>{"use strict";var t={523:(t,e,n)=>{n.d(e,{A:()=>f});var r=n(601),s=n.n(r),o=n(314),c=n.n(o),i=n(417),a=n.n(i),u=new URL(n(474),n.b),l=new URL(n(552),n.b),h=c()(s()),d=a()(u),p=a()(l);h.push([t.id,`body {\n    margin: 0;\n    overflow: hidden;\n}\n\n* {\n    image-rendering: crisp-edges;\n}\n\n:root {\n    --boxes-sized: 10vmin;\n    /*\n    --dog-rotation: rotate(90deg) rotateY(180deg);\n    */\n    /*--dog-rotation: 0deg;*/\n}\n\n.flex {\n    display: flex;\n    flex-direction: row;\n    height: 100vh;\n}\n\n#compile {\n    position: absolute;\n    top: calc(100% - 10px);\n    left: calc(100% - 10px);\n    width: 10vmin;\n    height: 10vmin;\n    border-radius: 50%;\n    transform: translate(-100%, -100%);\n}\n\niframe {\n    flex: 3;\n    border: none;\n}\n\n.sensor_emulator {\n    justify-content: center;\n    align-items: center;\n    flex: 2;\n}\n\n#action_limit {\n    position: absolute;\n    top: 0;\n    left: 100%;\n    width: max-content;\n    padding-right: 15px;\n    transform: translateX(-100%);\n}\n\n.row {\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    height: 100%;\n    width: 100%;\n}\n\n.boxes {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    width: 100%;\n    background-size: contain;\n}\n\n.dog {\n    background-image: url(${d});\n    /*transform: var(--dog-rotation);*/\n}\n\n.slime {\n    background-image: url(${p});\n}`,""]);const f=h},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var c={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(c[a]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);r&&c[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),s&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=s):l[4]="".concat(s)),e.push(l))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},c=[],i=0;i<t.length;i++){var a=t[i],u=r.base?a[0]+r.base:a[0],l=o[u]||0,h="".concat(u," ").concat(l);o[u]=l+1;var d=n(h),p={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=s(p,r);r.byIndex=i,e.splice(i,0,{identifier:h,updater:f,references:1})}c.push(h)}return c}function s(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var o=r(t=t||[],s=s||{});return function(t){t=t||[];for(var c=0;c<o.length;c++){var i=n(o[c]);e[i].references--}for(var a=r(t,s),u=0;u<o.length;u++){var l=n(o[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=a}}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},474:(t,e,n)=>{t.exports=n.p+"images/2c929be2d39e5a2636ec.png"},552:(t,e,n)=>{t.exports=n.p+"images/b5a5c892a7e101dfb54c.png"}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!t||!/^http(s?):/.test(t));)t=r[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,n.nc=void 0;var r=n(72),s=n.n(r),o=n(825),c=n.n(o),i=n(659),a=n.n(i),u=n(56),l=n.n(u),h=n(540),d=n.n(h),p=n(113),f=n.n(p),v=n(523),m={};m.styleTagTransform=f(),m.setAttributes=l(),m.insert=a().bind(null,"head"),m.domAPI=c(),m.insertStyleElement=d(),s()(v.A,m),v.A&&v.A.locals&&v.A.locals;class y{constructor(t,e){this.workspace=t,this.blockData=e}clear(){this.workspace.clearCache()}run(){return t=this,e=arguments,r=function*(t=!0){var e;if(t&&null!=this.workspace.actionAvaible){var n=null!==(e=this.workspace.actionAvaible)&&void 0!==e?e:0;this.workspace.actionAvaible=n-1}this.workspace.render();const r=this.blockData.next;if(r){const t=$(this.workspace,r.block);yield t.run()}},new((n=void 0)||(n=Promise))((function(s,o){function c(t){try{a(r.next(t))}catch(t){o(t)}}function i(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}a((r=r.apply(t,e||[])).next())}));var t,e,n,r}}var w=function(t,e,n,r){return new(n||(n=Promise))((function(s,o){function c(t){try{a(r.next(t))}catch(t){o(t)}}function i(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}a((r=r.apply(t,e||[])).next())}))};class b extends y{constructor(t,e){super(t,e),this.workspace=t,this.blockData=e}run(){const t=Object.create(null,{run:{get:()=>super.run}});return w(this,void 0,void 0,(function*(){const e=this.blockData.inputs;if(e){const t=e.DO.block;yield $(this.workspace,t).run()}yield t.run.call(this,!1)}))}}class g extends y{constructor(t,e){super(t,e),this.workspace=t,this.blockData=e}run(){const t=Object.create(null,{run:{get:()=>super.run}});return w(this,void 0,void 0,(function*(){const e=this.blockData.inputs;if(e){const t=yield $(this.workspace,U(e.SECONDS)).run();yield new Promise((e=>setTimeout(e,1e3*t)))}yield t.run.call(this,!1)}))}}class x extends y{constructor(t,e){super(t,e),this.workspace=t,this.blockData=e}run(){const t=Object.create(null,{clear:{get:()=>super.clear},run:{get:()=>super.run}});return e=this,n=void 0,s=function*(){t.clear.call(this);const e=this.blockData.inputs.TIMES,n=yield $(this.workspace,U(e)).run();for(let t=0;t<n;t++)if(this.blockData.inputs.DO){const t=this.blockData.inputs.DO.block;yield $(this.workspace,t).run()}yield t.run.call(this,!1)},new((r=void 0)||(r=Promise))((function(t,o){function c(t){try{a(s.next(t))}catch(t){o(t)}}function i(t){try{a(s.throw(t))}catch(t){o(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(c,i)}a((s=s.apply(e,n||[])).next())}));var e,n,r,s}}var k=function(t,e,n,r){return new(n||(n=Promise))((function(s,o){function c(t){try{a(r.next(t))}catch(t){o(t)}}function i(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}a((r=r.apply(t,e||[])).next())}))};class E extends y{constructor(t,e){super(t,e),this.workspace=t,this.blockData=e}run(){const t=Object.create(null,{clear:{get:()=>super.clear}});return k(this,void 0,void 0,(function*(){return t.clear.call(this),this.blockData.fields.NUM}))}}class D extends y{constructor(t,e){super(t,e),this.workspace=t,this.blockData=e}run(){const t=Object.create(null,{clear:{get:()=>super.clear}});return k(this,void 0,void 0,(function*(){t.clear.call(this);const e=yield $(this.workspace,U(this.blockData.inputs.A)).run(),n=yield $(this.workspace,U(this.blockData.inputs.B)).run();switch(this.blockData.fields.OP){case"ADD":return e+n;case"SUBTRACT":return e-n;case"MULTIPLY":return e*n;case"DIVIDE":return e/n;case"POWER":return Math.pow(e,n);default:return 0}}))}}class C{constructor(t,e){this.x=t,this.y=e}static init(t){return new C(t.x,t.y)}}const O=n.p+"images/30339d382568b7f27a62.png",A=n.p+"images/0e6f80409f96da26f0a5.png";class T extends C{constructor(t){super(t.x,t.y),this.state=!1}render(){const t=document.createElement("img");t.src=this.state?A:O,t.className="led",t.style.position="relative",t.style.top=100*this.y+"px",t.style.left=100*this.x+"px",t.style.width="250px",t.style.height="250px",t.style.rotate="90deg",document.getElementsByClassName("sensor_emulator")[0].appendChild(t)}clear(){}}T.init=t=>new T(C.init(t));const _=T,S=n.p+"images/79d5f5b19a4d1f2402ab.png",j=n.p+"images/f4d6b8cd2294a181534c.png";class P extends C{constructor(t){super(t.x,t.y),this.state=!1}render(){const t=document.createElement("img");t.src=this.state?S:j,t.className="led",t.style.position="relative",t.style.top=100*this.y+"px",t.style.left=100*this.x+"px",t.style.width="200px",t.style.height="200px",document.getElementsByClassName("sensor_emulator")[0].appendChild(t)}clear(){}}P.init=t=>new P(C.init(t));const M=P;var N=function(t,e,n,r){return new(n||(n=Promise))((function(s,o){function c(t){try{a(r.next(t))}catch(t){o(t)}}function i(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,i)}a((r=r.apply(t,e||[])).next())}))};class L extends y{constructor(t,e){super(t,e),this.workspace=t,this.blockData=e}run(){const t=Object.create(null,{clear:{get:()=>super.clear},run:{get:()=>super.run}});return N(this,void 0,void 0,(function*(){t.clear.call(this),this.workspace.entities.forEach((t=>{t instanceof M&&(t.state="0"===this.blockData.fields.LED)})),yield t.run.call(this)}))}}class I{constructor(t){var e=new AudioContext,n=e.createOscillator();n.type="square",n.frequency.value=2*t,n.connect(e.destination),n.start(),this.context=e}stop(){this.context.close()}}class B extends y{constructor(t,e){super(t,e),this.beep=null,this.workspace=t,this.blockData=e}run(){const t=Object.create(null,{clear:{get:()=>super.clear},run:{get:()=>super.run}});return N(this,void 0,void 0,(function*(){t.clear.call(this);const e=this.workspace.cacheCodeExecution.find((t=>t instanceof B));if(e&&(e.beep.stop(),this.workspace.cacheCodeExecution=this.workspace.cacheCodeExecution.filter((t=>t!==e))),this.blockData.inputs){const t=yield $(this.workspace,U(this.blockData.inputs.TONE)).run();if(this.workspace.entities.forEach((e=>{e instanceof _&&(e.state=t>0)})),t<=0)return;this.beep=new I(t),this.workspace.cacheCodeExecution.push(this)}yield t.run.call(this)}))}}function $(t,e){switch(e.type){case"start_event":return new b(t,e);case"wait_for":return new g(t,e);case"led_set":return new L(t,e);case"buzzer_set":return new B(t,e);case"math_number":return new E(t,e);case"math_arithmetic":return new D(t,e);case"controls_repeat_ext":return new x(t,e);default:throw new Error(`Block not found ${e.type}`)}}function U(t){return t.block?t.block:t.shadow}function R(t,e){return n=this,r=void 0,o=function*(){t.resetLevel(),yield new Promise((t=>setTimeout(t,250)));const n=e.blocks;if(!n)return;const r=n.blocks;for(let e=0;e<r.length;e++){const n=r[e];"start_event"===n.type&&(yield $(t,n).run())}},new((s=void 0)||(s=Promise))((function(t,e){function c(t){try{a(o.next(t))}catch(t){e(t)}}function i(t){try{a(o.throw(t))}catch(t){e(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof s?n:new s((function(t){t(n)}))).then(c,i)}a((o=o.apply(n,r||[])).next())}));var n,r,s,o}document.getElementById("action_limit"),document.querySelector(".emulator");const W=Math.pow(6,2);Math.sqrt(W);var q;const H=new class{constructor(t=10){this.entities=[],this.actionAvaible=null,this.cacheWorkspace=[],this.cacheCodeExecution=[],this.clearCache(),this.actionAvaible=t,this.render();const e=structuredClone([this.entities,structuredClone(t)]);this.cacheWorkspace=e}addEntity(t){this.entities.push(t);const e=t;this.cacheWorkspace[0].push(e.constructor.init(t)),this.clearCache(),this.render()}resetLevel(){const t=structuredClone(this.cacheWorkspace);this.entities=[],this.cacheWorkspace[0].forEach(((t,e)=>{"init"in t.constructor&&this.entities.push(t.constructor.init(t))})),this.actionAvaible=t[1],this.render()}clearCache(){var t=Object.assign({},this);for(const e in t.entities){const n=t.entities[e];null!=n&&"clear"in n&&n.clear()}}render(){document.getElementsByClassName("sensor_emulator")[0].innerHTML="";var t=Object.assign({},this);for(const e in t.entities){const n=t.entities[e];null!=n&&"render"in n&&n.render()}this.actionAvaible}};H.addEntity(new M(new C(1,1))),H.addEntity(new _(new C(2,1)));var z=JSON.parse('{"blocks":{"languageVersion":0,"blocks":[{"type":"start_event","id":"Y$PnHc11]nleH0`8*L$#","x":250,"y":250}]}}');document.querySelector("body > div > iframe").contentWindow.addEventListener("message",(function(t){z=JSON.parse(t.data)}),!1);var F=!1;null===(q=document.getElementById("compile"))||void 0===q||q.addEventListener("click",(t=>{return e=void 0,n=void 0,s=function*(){F||(F=!0,yield R(H,z),F=!1)},new((r=void 0)||(r=Promise))((function(t,o){function c(t){try{a(s.next(t))}catch(t){o(t)}}function i(t){try{a(s.throw(t))}catch(t){o(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(c,i)}a((s=s.apply(e,n||[])).next())}));var e,n,r,s}))})();